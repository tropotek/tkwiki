<?php
/**
 * Setup system configuration parameters
 *
 * @author Tropotek <http://www.tropotek.com/>
 */
use Tk\Config;

return function (Config $config) {

    /**
     * Default System DB
     */
    $config['db.mysql'] = 'localhost:3306/user/pass/dbName';

    /*
     * Site hostname
     */
    $config['hostname'] = 'localhost';

    /**
     * Set environment type to prevent destructive functions on production sites
     * options are 'dev' | 'prod'
     */
    $config['env.type'] = 'dev';

    /**
     * Enable to view more verbose log messages
     */
    $config['debug'] = true;

    /**
     * Site template paths
     */
    $config->set('path.template.public', '/html/default.html');
    $config->set('path.template.admin', $config->get('path.template.public'));
    $config->set('path.template.user', $config->get('path.template.public'));

    /*
     * Setup available page templates that reside in the "/html" directory
     * Add the filename without an extension, the extension should be '.html'
     * array:
     *    ['Template Name' => 'filename']
     */
    $config['wiki.templates'] = [
        'Default' => 'default',
        'Default Fluid' => 'default_fluid',
    ];

    /**
     * Enable/disable users to change password from their profile page
     * default: true
     */
    //$config['user.profile.password']    = false;

    /*
     * DB secret API key
     * Use this key for the mirror command in a dev environment.
     * Default: empty, and disabled
     */
    //$config['db.mirror.secret'] = '';

    /*
     * \Tk\Encrypt function secret seed
     */
    $config['system.encrypt'] = '';

    /*
     * Set the site timezone for PHP and MySQL
     */
    //$config['php.date.timezone']    = 'Australia/Melbourne';

    /*
     * Email template relative path
     */
    $config['system.mail.template'] = '/html/templates/mail.default.xtpl';

    /*
     * Enable DB sessions
     * Default: false
     */
    $config['session.db_enable']    = true;

    /*
     * Set the location of the site log file
     * Default: uses the system PHP log file
     */
     //$config['php.error_log']      = '/home/user/log/error.log';

    /*
     * The default log level
     * Default: LogLevel::ERROR
     */
    //$config['log.logLevel'] = \Psr\Log\LogLevel::DEBUG;


    // Setup dev environment
    if ($config->isDev()) {
        // Send all emails to the debug address
        $config['system.debug.email'] = 'admin@email.com';
        // Used for the Mirror command
        //$config['db.mirror.url']    = 'https://example.com/util/mirror';
    }

    // setup debug log levels
    if ($config->isDebug()) {
        error_reporting(-1);
        $config['php.display_errors'] = 'On';
        $config['php.error_log']      = '/home/user/log/error.log';
        $config['log.logLevel']       = \Psr\Log\LogLevel::DEBUG;
        // force logging with NO_LOG
        //$config['log.enableNoLog']   = true;
    }

};
